# notiv CLI

**notiv** is a Git-like, encrypted key-value store powered by [GravitonDB](https://github.com/deroproject/graviton). 
It combines cryptographic Merkle-tree snapshots with a simple CLI for managing versioned, hierarchical key-value data in an **append-only** model.  
Perfect for local-first workflows, reproducible pipelines, and auditable state transitions. 

notiv is alpha-stage software and is intended for experimentation and research; please be advised, notiv is not for production-use.

---

## ⚡ Features

- ✅ Append-only key-value trees with cryptographic integrity  
- ✅ Git-style snapshots and version tracking  
- ✅ Atomic and batched commit support  
- ✅ Optional encryption with password-based keys  
- ✅ Disk-backed or in-memory storage  
- ✅ Lightweight, composable CLI  
- ✅ Commit tagging for metadata and organization  
- ✅ Tree-scoped access to keys and values  

---

## 📦 Installation

```bash
go install github.com/notiv-ideas/notiv@latest
````

> Requires **Go 1.24+**

---

## 🔧 Configuration

On first run, notiv auto-generates a config file:

```
~/.config/notiv/config.json
```

### Example default configuration

```json
{
  "defaultDataDir": ".notiv/share/data",
  "defaultDecryptPolicy": "false",
  "defaultDiskStore": "true",
  "defaultEncryptPolicy": "true",
  "defaultEncryptedCHECKSUM": "<AUTOGENERATED>",
  "defaultProjectDir": ".",
  "defaultShareDir": ".notiv/share",
  "defaultnotivDir": ".notiv"
}
```

Update configuration values using:

```bash
notiv config edit defaultShareName myproject
notiv config edit defaultDiskStore false
```

---

## 🚀 Usage

```bash
notiv [global flags] <command> [subcommand] [arguments...]
```

### 🔑 Global Flags

| Flag                   | Description                            |
| ---------------------- | -------------------------------------- |
| `--help`               | Show usage instructions                |
| `--ram`                | Use in-memory (ephemeral) storage      |
| `--share=PATH`         | Use a specific share directory         |
| `--tags="tag1 tag2"`   | Apply tags to the commit               |
| `--snapshot-version=N` | Operate on a specific snapshot version |
| `--tree-version=N`     | Operate on a specific tree version     |
| `--encrypt`            | Enable encryption for written values   |
| `--decrypt`            | Enable decryption when reading values  |
| `--password="PASS"`    | Supply encryption/decryption password  |

---

## 📘 Commands

### `help`

Display general or command-specific help.

---

### `config`

* `list` — Show current configuration
* `edit <KEY> <VALUE>` — Modify configuration values

---

### `share`

* `new <NAME | /full/path>` — Create a new share directory

---

### `put <KEY> <VALUE> <TREE>`

Insert or update a key-value pair in the given tree.
Data is written in an append-only manner and cannot be retroactively modified.

---

### `get <KEY> <TREE>`

Retrieve a value from the specified tree.
Supports decryption if `--decrypt` is set or enabled in config.

---

### `list`

* `trees` — List all available trees *(coming soon)*
* `keys <TREE>` — List keys in one or more trees
* `pairs <TREE>` — List key-value pairs from one or more trees

---

### `version`

* `snapshot` — Show the current snapshot version
* `current <TREE>` — Show the current version of each tree
* `parent <TREE>` — Show the parent version of each tree

---

## 🧪 Examples

```bash
# Show current configuration
notiv config list

# Create a new share
notiv share new myproject

# Add data to a tree
notiv put alice email@example.com users

# Retrieve a key's value
notiv get alice users

# List all known trees (coming soon)
notiv list trees

# Commit changes using batch mode
notiv commit batch users posts

# Use a different share and apply tags
notiv --share=/tmp/myshare --tags="release alpha" commit atomic users
```

---

## 📁 File Structure

By default, notiv stores data in:

```
.notiv/
```

This behaves similarly to `.git`, storing append-only data in snapshot form.
Storage can be customized using `--ram` for ephemeral memory, or `--share` for custom paths.

No background daemon is required. All data is versioned, **append-only**, and cryptographically verifiable using Merkle trees via graviton.

---

## 🧠 Design Philosophy

notiv is built around a few core principles:

* **Append-only** — No deletions or mutations; only additions and new versions
* **Auditable** — Every change is cryptographically tracked and recoverable
* **Minimalist** — No background processes, servers, or dependencies
* **Composable** — Designed to be used via CLI and automation
* **Secure by default** — Optional encryption and Merkle-based integrity

---

## 🛠️ Development

Run from source:

```bash
go run . <command> [args...]
```

Build:

```bash
go build .
./notiv
```

Install:

```bash
go install github.com/notiv-ideas/notiv@latest
notiv
```

---

## 📝 License

This project is licensed under the **GNU GPLv3**.

notiv uses [GravitonDB](https://github.com/deroproject/graviton), which is also GPLv3.
Redistribution of this code or compiled binaries must comply with the same license.

See [LICENSE](./LICENSE) for full terms.

---

## 🤝 Contributing

Pull requests, issues, and feature ideas are welcome.
Try things. Break things. Improve them. That’s the spirit of notiv.

---

## 📫 Contact

For discussion, collaboration, or to report bugs:
[Open an issue on GitHub](https://github.com/notiv-ideas/notiv/issues)


